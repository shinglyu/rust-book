# åŸºæœ¬å‹åˆ¥

Rust èªè¨€æœ‰è¨±å¤šè¢«èªç‚ºæ˜¯ "åŸºæœ¬" (primitive) çš„å‹åˆ¥ã€‚
é€™ä»£è¡¨ä»–å€‘æ˜¯å…§å»ºåœ¨èªè¨€å…§çš„ã€‚
Rust çš„æ¨™æº–å‡½å¼åº«ä¹Ÿæä¾›äº†è¨±å¤šåŸºæ–¼é€™äº›åŸºæœ¬å‹åˆ¥çš„æœ‰ç”¨å‹åˆ¥ï¼Œå®ƒå€‘ä¹Ÿæ˜¯åŸºæœ¬å‹åˆ¥ã€‚

## å¸ƒæ— (Booleans)

Rust å…§å»ºå¸ƒæ—å‹åˆ¥ï¼Œå«åš `bool`ã€‚
ä»–æœ‰å…©ç¨®å€¼ï¼Œ`true` å’Œ `false`ï¼š

```rust
let x = true;

let y: bool = false;
```

å¸ƒæ—é€šå¸¸ç”¨åœ¨ [if æ¢ä»¶é‹ç®—å¼][if]ã€‚

[if]: if.html

ä½ å¯ä»¥åœ¨[æ¨™æº–å‡½å¼åº«æ–‡ä»¶][bool]ä¸­æ‰¾åˆ°æ›´å¤šé—œæ–¼ `bool` çš„æ–‡ä»¶ã€‚

[bool]: https://doc.rust-lang.org/std/primitive.bool.html

## `char`

`char` å‹åˆ¥ä»£è¡¨ä¸€å€‹ Unicode å€¼ã€‚
ä½ å¯ä»¥ä»¥å–®å¼•è™Ÿï¼ˆ`'`ï¼‰å»ºç«‹ `char`ï¼š

```rust
let x = 'x';
let two_hearts = 'ğŸ’•';
```

ä¸åƒå…¶ä»–èªè¨€ï¼Œé€™ä»£è¡¨ Rust çš„ `char` ä¸¦éä¸€å€‹ä½å…ƒçµ„ï¼Œè€Œæ˜¯å››å€‹ã€‚

ä½ å¯ä»¥åœ¨[æ¨™æº–å‡½å¼åº«æ–‡ä»¶][char]ä¸­æ‰¾åˆ°æ›´å¤šé—œæ–¼ `char` çš„æ–‡ä»¶ã€‚

[char]: https://doc.rust-lang.org/std/primitive.char.html

## æ•¸å­—å‹åˆ¥

Rust æœ‰è¨±å¤šæ•¸å­—å‹åˆ¥ï¼Œåˆ†ç‚ºä¸€äº›ä¸åŒé¡å‹ï¼šå¸¶è™Ÿ (signed) å’Œéå¸¶è™Ÿ (unsigned)ï¼Œå›ºå®šé•·åº¦å’Œå¯è®Šé•·åº¦ï¼Œæµ®é»æ•¸å’Œæ•´æ•¸ã€‚

é€™äº›å‹åˆ¥åŒ…å«å…©éƒ¨åˆ†ï¼šé¡å‹å’Œå¤§å°ã€‚
ä¾‹å¦‚ï¼Œ`u16` æ˜¯ä¸€å€‹ 16 ä½å…ƒå¤§å°çš„éå¸¶è™Ÿå‹åˆ¥ã€‚
æ›´å¤šä½å…ƒèƒ½è®“ä½ æœ‰æ›´å¤§çš„æ•¸å­—ã€‚

å¦‚æœæ•¸å­—åœ¨å­—é¢ä¸Šæ²’æœ‰å…¶ä»–æ±è¥¿å¯ä»¥æ¨æ¸¬ä»–çš„å‹åˆ¥ï¼Œå®ƒæœƒä½¿ç”¨é è¨­å‹åˆ¥ï¼š

```rust
let x = 42; // x has type i32

let y = 1.0; // y has type f64
```

é€™è£¡æœ‰ä¸€ä»½ä¸åŒæ•¸å­—å‹åˆ¥çš„æ¸…å–®ï¼Œä»¥åŠå®ƒå€‘åœ¨æ¨™æº–å‡½å¼åº«ä¸­çš„æ–‡ä»¶é€£çµï¼š

* [i8](https://doc.rust-lang.org/std/primitive.i8.html)
* [i16](https://doc.rust-lang.org/std/primitive.i16.html)
* [i32](https://doc.rust-lang.org/std/primitive.i32.html)
* [i64](https://doc.rust-lang.org/std/primitive.i64.html)
* [u8](https://doc.rust-lang.org/std/primitive.u8.html)
* [u16](https://doc.rust-lang.org/std/primitive.u16.html)
* [u32](https://doc.rust-lang.org/std/primitive.u32.html)
* [u64](https://doc.rust-lang.org/std/primitive.u64.html)
* [isize](https://doc.rust-lang.org/std/primitive.isize.html)
* [usize](https://doc.rust-lang.org/std/primitive.usize.html)
* [f32](https://doc.rust-lang.org/std/primitive.f32.html)
* [f64](https://doc.rust-lang.org/std/primitive.f64.html)

è®“æˆ‘å€‘ä¾ç…§åˆ†é¡èµ°ä¸€è¼ªå§ï¼š

### å¸¶è™Ÿ (Signed) åŠéå¸¶è™Ÿ (Unsigned)

æ•´æ•¸å‹åˆ¥æœ‰å…©ç¨®è®Šå½¢ï¼šå¸¶è™Ÿè·Ÿéå¸¶è™Ÿã€‚
è¦äº†è§£å·®ç•°ä¹‹è™•ï¼Œè®“æˆ‘å€‘è©¦æƒ³æœ‰ä¸€å€‹ 4 ä½å…ƒå¤§å°çš„æ•¸å­—ã€‚
å¦‚æœæ˜¯å¸¶è™Ÿæ•´æ•¸ï¼Œ4 ä½å…ƒå¯ä»¥è®“ä½ å„²å­˜ `-8` åˆ° `+7` çš„æ•¸å­—ã€‚
ä»£è™Ÿæ•¸å­—ä½¿ç”¨ "äºŒè£œæ•¸è¡¨ç¤ºæ³•" (two's complement)ã€‚
ä¸€å€‹éå¸¶è™Ÿçš„ 4 ä½å…ƒæ•¸å­—å› ç‚ºä¸éœ€è¦å„²å­˜è² è™Ÿï¼Œæ‰€ä»¥å¯ä»¥å„²å­˜ `0` åˆ° `+15` çš„æ•¸å­—ã€‚

éå¸¶è™Ÿå‹åˆ¥ä½¿ç”¨ `u` ä½œç‚ºåˆ†é¡ï¼Œè€Œå¸¶è™Ÿå‹åˆ¥ä½¿ç”¨ `i`ã€‚
`i` ä»£è¡¨ "integer"ã€‚
æ‰€ä»¥ `u8` ä»£è¡¨ä¸€å€‹ 8 ä½å…ƒçš„éä»£è™Ÿæ•¸å­—ï¼Œè€Œ `i8` ä»£è¡¨ 8 ä½å…ƒçš„å¸¶è™Ÿæ•¸å­—ã€‚

### å›ºå®šå¤§å°å‹åˆ¥

å›ºå®šå¤§å°å‹åˆ¥çš„è¡¨ç¾æ–¹å¼æœ‰ä¸€äº›ç‰¹å®šæ•¸é‡çš„ä½å…ƒã€‚
æœ‰æ•ˆçš„ä½å…ƒå¤§å°æœ‰ `8`ã€`16`ã€`32`ã€`64`ã€‚
æ‰€ä»¥ `u32` æ˜¯ä¸€å€‹éå¸¶è™Ÿçš„ 32 ä½å…ƒæ•´æ•¸ï¼Œè€Œ `i64` æ˜¯ä¸€å€‹å¸¶è™Ÿçš„ 64 ä½å…ƒæ•´æ•¸ã€‚

### å¯è®Šå¤§å°å‹åˆ¥

Rust ä¹Ÿæœ‰æä¾›ä¸€äº›å¤§å°ä¾è³´æ–¼åº•å±¤æ©Ÿå™¨çš„æŒ‡æ¨™å¤§å°çš„å‹åˆ¥ã€‚
é€™äº›å‹åˆ¥çš„åˆ†é¡æ˜¯ "size"ï¼Œä¸”åˆ†ç‚ºå¸¶è™Ÿè·Ÿéå¸¶è™Ÿã€‚
ä»–åˆ†ç‚ºå…©é¡ï¼š`isize` å’Œ `usize`ã€‚

### æµ®é»æ•¸å‹åˆ¥

Rust ä¹Ÿæœ‰å…©ç¨®æµ®é»æ•¸ï¼š`f32` èˆ‡ `f64`ã€‚
ä»–å€‘å°æ‡‰åˆ° IEEE-754 çš„å–®ç²¾æº–åº¦å’Œé›™ç²¾æº–åº¦æµ®é»æ•¸ã€‚

## é™£åˆ— (Arrays)

è·Ÿå¾ˆå¤šç¨‹å¼èªè¨€ä¸€æ¨£ï¼ŒRust æœ‰ç”¨ä¾†è¡¨ç¾ä¸€çµ„äº‹ç‰©çš„æ¸…å–®å‹åˆ¥ã€‚
æœ€åŸºæœ¬çš„å°±æ˜¯ *é™£åˆ—* (array)ï¼Œä¸€å€‹å›ºå®šå¤§å°ã€æœ‰ç›¸åŒå‹åˆ¥çš„å…ƒç´ æ¸…å–®ã€‚
é™£åˆ—é è¨­æ˜¯ä¸å¯è®Šçš„ (immutable)ã€‚

```rust
let a = [1, 2, 3]; // a: [i32; 3]
let mut m = [1, 2, 3]; // m: [i32; 3]
```

é™£åˆ—çš„å‹åˆ¥æ˜¯ `[T; N]`ã€‚
æˆ‘å€‘å°‡åœ¨[æ³›å‹çš„ç« ç¯€][generics]æåˆ° `T` æ¨™è¨˜ã€‚
`N` æ˜¯ä¸€å€‹ç·¨è­¯æœŸçš„å¸¸æ•¸ï¼Œä»£è¡¨é™£åˆ—çš„é•·åº¦ã€‚

æœ‰ä¸€å€‹å¯ä»¥åˆå§‹åŒ–é™£åˆ—ä¸­æ‰€æœ‰å…ƒç´ ç‚ºåŒä¸€å€‹å€¼çš„ç°¡å¯«ã€‚
åœ¨ä»¥ä¸‹ç¯„ä¾‹ï¼Œæ‰€æœ‰ `a` ä¸­çš„å…ƒç´ å°‡è¢«åˆå§‹åŒ–ç‚º `0`ï¼š

```rust
let a = [0; 20]; // a: [i32; 20]
```

ä½ å¯ä»¥é€é `a.len()` å–å¾— `a` é™£åˆ—ä¸­å…ƒç´ çš„å€‹æ•¸ï¼š

```rust
let a = [1, 2, 3];

println!("a has {} elements", a.len());
```

ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨ *ä¸‹æ¨™* (subscript) çš„æ¨™è¨˜æ–¹å¼å­˜å–é™£åˆ—ä¸­ç‰¹å®šå…ƒç´ ï¼š

> è­¯è¨»ï¼šæ­¤è™•çš„ *ä¸‹æ¨™* æ‡‰æŒ‡ `[n]` é€™å€‹æ¨™è¨˜æ–¹å¼ã€‚

```rust
let names = ["Graydon", "Brian", "Niko"]; // names: [&str; 3]

println!("The second name is: {}", names[1]);
```

èˆ‡å…¶ä»–å¤§å¤šæ•¸ç¨‹å¼èªè¨€ä¸€æ¨£ï¼Œä¸‹æ¨™å¾é›¶é–‹å§‹ï¼Œæ‰€ä»¥ç¬¬ä¸€å€‹å…ƒç´ åç¨±æ˜¯ `names[0]`ï¼Œç¬¬äºŒå€‹åç¨±æ˜¯ `names[1]`ã€‚
ä¸Šè¿°ç¯„ä¾‹æœƒå°å‡º `The second name is: Brian`ã€‚
å¦‚æœä½ å˜—è©¦ä½¿ç”¨è¶…å‡ºé™£åˆ—çš„ä¸‹æ¨™ï¼Œä½ æœƒå¾—åˆ°éŒ¯èª¤è¨Šæ¯ï¼šé™£åˆ—å­˜å–æœƒåœ¨åŸ·è¡ŒæœŸåšé‚Šç•Œæª¢æŸ¥ã€‚
åœ¨å…¶ä»–ç³»çµ±ç¨‹å¼èªè¨€ä¸­ï¼Œé€™ç¨®ä¸ç•¶å­˜å–æ˜¯è¨±å¤šç¨‹å¼éŒ¯èª¤ (bug) çš„æ ¹æºã€‚

ä½ å¯ä»¥åœ¨[æ¨™æº–å‡½å¼åº«æ–‡ä»¶][array]ä¸­æ‰¾åˆ°æ›´å¤šé—œæ–¼ `array` çš„æ–‡ä»¶ã€‚

[array]: https://doc.rust-lang.org/std/primitive.array.html

## Slices

ä¸€å€‹ "slice" æ˜¯ä¸€å€‹å…¶ä»–è³‡æ–™çµæ§‹çš„åƒç…§ï¼ˆæˆ– "è¦–åœ–"ï¼‰ã€‚
å®ƒå…è¨±å®‰å…¨ã€æœ‰æ•ˆçš„å­˜å–é™£åˆ—çš„ä¸€éƒ¨ä»½è€Œä¸ç”¨è¤‡è£½é™£åˆ—ã€‚
ä¾‹å¦‚ï¼Œä½ å¯èƒ½åªæƒ³è¦åƒè€ƒè®€åˆ°è¨˜æ†¶é«”ä¸­çš„æª”æ¡ˆä¸­çš„æŸä¸€è¡Œã€‚
æœ¬è³ªä¸Šï¼Œä¸€å€‹ "slice" ä¸æ˜¯ç›´æ¥å»ºç«‹çš„ï¼Œè€Œè¦å¾ä¸€å€‹å·²ç¶“å­˜åœ¨çš„è®Šæ•¸ç¶å®šä¸­å»ºç«‹ã€‚
Slices æœƒå®šç¾©é•·åº¦ï¼Œå®ƒå¯ä»¥æ˜¯å¯è®Š (mutable) æˆ–ä¸å¯è®Š (immutable)ã€‚

å¾å…§éƒ¨ä¾†çœ‹ï¼Œslices åƒæ˜¯ä¸€å€‹æŒ‡å‘è³‡æ–™é–‹é ­çš„æŒ‡æ¨™ï¼Œå’Œå®ƒçš„é•·åº¦ã€‚

### Slicing èªæ³•

ä½ å¯ä»¥ä½¿ç”¨ `&` å’Œ `[]` çš„çµ„åˆå»å¾è¨±å¤šè³‡æ–™çµæ§‹å»ºç«‹ sliceã€‚
`&` èªªæ˜äº† slices è·Ÿ[åƒç…§][references]å¾ˆé¡ä¼¼ï¼Œæˆ‘å€‘æœƒåœ¨æœ¬ç¯€çš„å¾Œé¢èªªåˆ°ç´°ç¯€ã€‚
`[]` å¸¶æœ‰ç¯„åœçš„è³‡è¨Šï¼Œè®“ä½ å®šç¾© slice çš„é•·åº¦ã€‚

[references]: references-and-borrowing.html

```rust
let a = [0, 1, 2, 3, 4];
let complete = &a[..]; // A slice containing all of the elements in a
let middle = &a[1..4]; // A slice of a: only the elements 1, 2, and 3
```

Slices çš„å‹åˆ¥æ˜¯ `&[T]`ã€‚
æˆ‘å€‘å°‡æœƒåœ¨[æ³›å‹][generics]è«‡åˆ° `T`ã€‚

[generics]: generics.html

ä½ å¯ä»¥åœ¨[æ¨™æº–å‡½å¼åº«æ–‡ä»¶][slice]ä¸­æ‰¾åˆ°æ›´å¤šé—œæ–¼ slices çš„æ–‡ä»¶ã€‚

[slice]: https://doc.rust-lang.org/std/primitive.slice.html

## `str`

Rust çš„ `str` å‹åˆ¥æ˜¯æœ€åŸºæœ¬çš„å­—ä¸²å‹åˆ¥ã€‚
è·Ÿ[å‹•æ…‹å¤§å°å‹åˆ¥][dst]ï¼Œå®ƒæœ¬èº«ä¸æ˜¯å¾ˆæœ‰ç”¨ï¼Œä½†ç•¶å®ƒæ”¾åœ¨åƒç…§ä¹‹å¾Œå°±å¾ˆæœ‰ç”¨äº†ï¼Œåƒæ˜¯ `$str`ã€‚
ç•¶æˆ‘å€‘è«‡åˆ°[å­—ä¸²][strings]å’Œ[åƒç…§][references]çš„æ™‚å€™å†ä¾†ç´°èªªã€‚

[dst]: unsized-types.html
[strings]: strings.html
[references]: references-and-borrowing.html

ä½ å¯ä»¥åœ¨[æ¨™æº–å‡½å¼åº«æ–‡ä»¶][str]ä¸­æ‰¾åˆ°æ›´å¤šé—œæ–¼ `str` çš„æ–‡ä»¶ã€‚

[str]: https://doc.rust-lang.org/std/primitive.str.html

## å¤šå…ƒçµ„ (Tuples)

ä¸€å€‹å¤šå…ƒçµ„ (tuple) æ˜¯ä¸€çµ„å›ºå®šå¤§å°çš„æœ‰åº (ordered) æ¸…å–®ã€‚
å°±åƒï¼š

```rust
let x = (1, "hello");
```

é€™æ˜¯é•·åº¦ç‚º 2 çš„å¤šå…ƒçµ„ï¼Œç”±æ‹¬å¼§å’Œé€—è™Ÿçµ„æˆã€‚
ä»¥ä¸‹æ˜¯åŒæ¨£çš„ç¨‹å¼ç¢¼ï¼Œä½†æ˜¯å¤šäº†å‹åˆ¥è¨»é‡‹ï¼š

```rust
let x: (i32, &str) = (1, "hello");
```

å¦‚ä½ æ‰€è¦‹ï¼Œå¤šå…ƒçµ„çš„å‹åˆ¥èˆ‡å¤šå…ƒçµ„å¾ˆåƒï¼Œåªæ˜¯å„å€‹ä½ç½®æ˜¯å‹åˆ¥åç¨±è€Œä¸æ˜¯æ•¸å€¼ã€‚
å¿ƒç´°çš„è®€è€…æœƒæ³¨æ„åˆ°å¤šå…ƒçµ„æ˜¯ç•°è³ªçš„ (heterogeneous)ï¼šæˆ‘å€‘åœ¨ä¸€å€‹å¤šå…ƒçµ„ä¸­åŒæ™‚æœ‰ `i32` èˆ‡ `&str`ã€‚
åœ¨ç³»çµ±ç¨‹å¼èªè¨€ä¸­ï¼Œå­—ä¸²æœƒæ¯”å…¶ä»–èªè¨€è¤‡é›œä¸€é»ã€‚
ç¾åœ¨ï¼ŒæŠŠ `&str` ç•¶ä½œ *å­—ä¸² slice*ï¼Œæˆ‘å€‘å¾ˆå¿«å°±æœƒèªªåˆ°ã€‚

ç•¶å…©å€‹å¤šå…ƒçµ„æœ‰ç›¸åŒçš„å‹åˆ¥å’Œ[å…ƒæ•¸][arity] (arity) æ™‚ï¼Œä½ å¯ä»¥æŠŠä¸€å€‹å¤šå…ƒçµ„è³¦å€¼çµ¦å¦ä¸€å€‹ã€‚
ç›¸åŒé•·åº¦çš„å¤šå…ƒçµ„æœ‰è‘—ç›¸åŒçš„å…ƒæ•¸ã€‚

[arity]: glossary.html#å…ƒæ•¸%20(Arity)

```rust
let mut x = (1, 2); // x: (i32, i32)
let y = (2, 3); // y: (i32, i32)

x = y;
```

ä½ å¯ä»¥é€é *destructuring let* å­˜å–å¤šå…ƒçµ„çš„æ¬„ä½ã€‚
ä»¥ä¸‹æ˜¯ç¯„ä¾‹ï¼š

```rust
let (x, y, z) = (1, 2, 3);

println!("x is {}", x);
```

é‚„è¨˜å¾—[ä¹‹å‰][let]ç•¶æˆ‘æåˆ° `let` é™³è¿°å¼çš„å·¦é‚Šé æ¯”è³¦å€¼ç¶å®šé‚„å¼·å¤§å—ï¼Ÿ
é€™å°±æ˜¯äº†ã€‚
æˆ‘å€‘å¯ä»¥æ”¾ä¸€å€‹æ¨¡å¼ (pattern) åœ¨ `let` çš„å·¦é‚Šï¼Œç„¶å¾Œå¦‚æœå®ƒè·Ÿå³é‚Šç›¸ç¬¦ï¼Œæˆ‘å€‘å°±å¯ä»¥ä¸€æ¬¡è³¦å€¼å¤šå€‹ç¶å®šã€‚
åœ¨é€™æƒ…å½¢ä¸‹ï¼Œ`let` "è§£æ§‹" æˆ– "æ‹†é–‹" äº†å¤šå…ƒçµ„ï¼Œç„¶å¾Œè³¦å€¼åˆ°ä¸‰å€‹ç¶å®šä¸Šã€‚

[let]: variable-bindings.html

é€™æ¨£çš„æ¨¡å¼éå¸¸å¼·å¤§ï¼Œæˆ‘å€‘å°‡æœƒåœ¨å¾Œé¢ä¸€ç›´çœ‹åˆ°ã€‚

åœ¨æ‹¬è™Ÿä¸­åªæœ‰ä¸€å€‹å€¼æ™‚ï¼Œåœ¨å€¼å¾Œé¢åŠ ä¸Šé€—è™Ÿï¼Œå¯ä»¥æ¶ˆæ­§ç¾©ç¢ºå®šå®ƒæ˜¯ä¸€å€‹å–®å…ƒç´ çš„å¤šå…ƒçµ„ï¼š

```rust
(0,); // single-element tuple
(0); // zero in parentheses
```

### å¤šå…ƒçµ„ç´¢å¼• (Tuple Indexing)

ä½ ä¹Ÿå¯ä»¥ç”¨ç´¢å¼•èªæ³•å»å­˜å–å¤šå…ƒçµ„çš„æ¬„ä½ï¼š


```rust
let tuple = (1, 2, 3);

let x = tuple.0;
let y = tuple.1;
let z = tuple.2;

println!("x is {}", x);
```

å°±åƒé™£åˆ—çš„ç´¢å¼•ï¼Œå®ƒå¾é›¶é–‹å§‹ï¼Œä½†æ˜¯ä¸åƒé™£åˆ—æ‰€ä»¥ï¼Œå®ƒä½¿ç”¨ `.` è€Œä¸æ˜¯ `[]`ã€‚

ä½ å¯ä»¥åœ¨[æ¨™æº–å‡½å¼åº«æ–‡ä»¶][tuple]ä¸­æ‰¾åˆ°æ›´å¤šé—œæ–¼å¤šå…ƒçµ„çš„æ–‡ä»¶ã€‚

[tuple]: https://doc.rust-lang.org/std/primitive.tuple.html

## å‡½å¼

å‡½å¼ä¹Ÿæœ‰å‹åˆ¥ï¼
å®ƒå€‘åƒé€™æ¨£ï¼š

```rust
fn foo(x: i32) -> i32 { x }

let x: fn(i32) -> i32 = foo;
```

åœ¨é€™å€‹ä¾‹å­ä¸­ï¼Œ`x` æ˜¯ "å‡½å¼æŒ‡æ¨™" æŒ‡å‘ä¸€å€‹æœ‰ `i32` åƒæ•¸ä¸¦å›å‚³ `i32` çš„å‡½å¼ã€‚


> *commit 228afd7*
